<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gym Progress Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #121212;
        color: white;
        margin: 0;
        padding: 0;
    }
    header {
        background: #1f1f1f;
        padding: 10px;
        text-align: center;
        font-size: 1.4em;
    }
    main {
        padding: 15px;
    }
    label, input, select, button {
        font-size: 1.1em;
        margin: 5px 0;
    }
    input, select {
        padding: 8px;
        border-radius: 5px;
        border: none;
        width: 100%;
    }
    button {
        background: #333;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
        margin-top: 10px;
    }
    button:hover {
        background: #555;
    }
    .exercise {
        background: #1e1e1e;
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 8px;
    }
    .set {
        display: flex;
        gap: 10px;
        margin-bottom: 5px;
    }
    .set input {
        flex: 1;
    }
</style>
</head>
<body>

<header>üèãÔ∏è Gym Progress Tracker</header>

<main>
    <label for="workout-date">Select Date:</label>
    <input type="date" id="workout-date">

    <div id="exercises-container"></div>

    <button onclick="saveWorkout()"> Save Workout</button>
    <button onclick="exportJSON()"> Export JSON</button>
    <button onclick="exportCSV()"> Export CSV</button>
</main>

<script>
// Default schedule based on your 3-Month Weight Loss Gym Plan
// Default schedule with warm-up included
let defaultSchedule = {
    "Monday": [
        "Warm-Up: 5-10 min Incline Treadmill Walk or Bike",
        "Leg Press Machine",
        "Chest Press Machine",
        "Seated Row or Cable Row",
        "Lat Pulldown (Wide Grip)",
        "Standing Dumbbell Lateral Raise",
        "Seated Machine Crunch",
        "Incline Treadmill Walk / Recumbent Bike / Elliptical"
    ],
    "Tuesday": [
        "Warm-Up: 5-10 min Brisk Walk or Light Cycling",
        "Dumbbell Thrusters (light)",
        "Low Step-ups (with support if needed)",
        "Seated Punches with Dumbbells",
        "Dumbbell Push Press",
        "Dumbbell Deadlifts (light)",
        "Cable Woodchop (light)",
        "Plank (on knees or incline)",
        "Seated Knee Raises"
    ],
    "Wednesday": [
        "Warm-Up: 5-10 min Rowing or Bike",
        "Dumbbell Chest Press",
        "Lat Pulldown (Machine)",
        "Seated Shoulder Press",
        "Dumbbell Bicep Curl",
        "Tricep Rope Pushdown",
        "Machine or Cable Crunch"
    ],
    "Thursday": [
        "Warm-Up: 5-10 min Treadmill or Elliptical",
        "Treadmill Walk (incline 5-6%) / Stationary Bike / Elliptical",
        "Cable Twists",
        "Bird-Dog",
        "Hanging Leg Raise or Knee Raise",
        "Hamstring + Glute + Back Stretch"
    ],
    "Friday": [
        "Warm-Up: 5-10 min Air Bike or Rowing",
        "Goblet Squats",
        "Seated Leg Curl",
        "Glute Kickback Machine",
        "Standing Calf Raise",
        "Leg Extension Machine",
        "Treadmill Intervals / Air Bike / Rowing Intervals"
    ],
    "Saturday": [],
    "Sunday": []
};


let workoutLogs = JSON.parse(localStorage.getItem("workoutLogs")) || {};

document.getElementById("workout-date").addEventListener("change", loadExercises);

function getDayName(dateString) {
    let date = new Date(dateString);
    return date.toLocaleDateString("en-US", { weekday: 'long' });
}

function loadExercises() {
    let date = document.getElementById("workout-date").value;
    if (!date) return;
    let dayName = getDayName(date);
    let exercises = defaultSchedule[dayName] || [];
    let container = document.getElementById("exercises-container");
    container.innerHTML = "";

    exercises.forEach(ex => {
        let exDiv = document.createElement("div");
        exDiv.className = "exercise";
        exDiv.innerHTML = `<h3>${ex}</h3>
            <div class="sets-container"></div>
            <button onclick="addSet(this)">‚ûï Add Set</button>`;
        container.appendChild(exDiv);
    });

    // Load saved data if exists
    if (workoutLogs[date]) {
        Object.keys(workoutLogs[date]).forEach((exercise, idx) => {
            let exDiv = container.children[idx];
            let setsContainer = exDiv.querySelector(".sets-container");
            workoutLogs[date][exercise].forEach(set => {
                let setDiv = document.createElement("div");
                setDiv.className = "set";
                setDiv.innerHTML = `
                    <input type="number" placeholder="Reps" value="${set.reps || ''}">
                    <input type="number" placeholder="Weight (kg)" value="${set.weight || ''}">
                    <input type="number" placeholder="Time (sec)" value="${set.time || ''}">
                `;
                setsContainer.appendChild(setDiv);
            });
        });
    }
}

function addSet(button) {
    let setsContainer = button.previousElementSibling;
    let setDiv = document.createElement("div");
    setDiv.className = "set";
    setDiv.innerHTML = `
        <input type="number" placeholder="Reps">
        <input type="number" placeholder="Weight (kg)">
        <input type="number" placeholder="Time (sec)">
    `;
    setsContainer.appendChild(setDiv);
}

function saveWorkout() {
    let date = document.getElementById("workout-date").value;
    if (!date) return alert("Please select a date");

    workoutLogs[date] = {};
    let exDivs = document.querySelectorAll(".exercise");
    exDivs.forEach(exDiv => {
        let exName = exDiv.querySelector("h3").innerText;
        let sets = [];
        exDiv.querySelectorAll(".set").forEach(setDiv => {
            let inputs = setDiv.querySelectorAll("input");
            sets.push({
                reps: inputs[0].value,
                weight: inputs[1].value,
                time: inputs[2].value
            });
        });
        workoutLogs[date][exName] = sets;
    });

    localStorage.setItem("workoutLogs", JSON.stringify(workoutLogs));
    alert("Workout saved!");
    autoBackup();
}

function exportJSON() {
    let blob = new Blob([JSON.stringify(workoutLogs, null, 2)], { type: "application/json" });
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "gym_progress.json";
    a.click();
}

function exportCSV() {
    let csv = "Date,Exercise,Set,Reps,Weight,Time\n";
    for (let date in workoutLogs) {
        for (let ex in workoutLogs[date]) {
            workoutLogs[date][ex].forEach((set, idx) => {
                csv += `${date},${ex},${idx + 1},${set.reps || ''},${set.weight || ''},${set.time || ''}\n`;
            });
        }
    }
    let blob = new Blob([csv], { type: "text/csv" });
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "gym_progress.csv";
    a.click();
}

function autoBackup() {
    const backupData = {
        schedule: defaultSchedule,
        logs: workoutLogs
    };
    const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: "application/json" });
    const date = new Date().toISOString().split("T")[0];
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `gym_backup_${date}.json`;
    a.style.display = "none";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}
</script>

</body>
</html>
